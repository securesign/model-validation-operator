apiVersion: v1
kind: Pod
metadata:
  name: {{.PodName}}
  namespace: {{.Namespace}}
  labels:
    validation.ml.sigstore.dev/ml: "{{.ModelName}}"{{if .TestBatch}}
    test-batch: "{{.TestBatch}}"{{end}}
spec:
  restartPolicy: Never
  containers:
  - name: test-container
    image: busybox:latest
    command: ["sh", "-c", "sleep 3600"]{{if .VolumeMounts}}
    volumeMounts:{{range .VolumeMounts}}
    - name: {{.Name}}
      mountPath: {{.MountPath}}
      readOnly: {{.ReadOnly}}{{end}}{{end}}
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
      runAsNonRoot: true
      runAsUser: 1000
      seccompProfile:
        type: RuntimeDefault{{if .Volumes}}
  volumes:{{range .Volumes}}
  - name: {{.Name}}{{if .HostPath}}
    hostPath:
      path: {{.HostPath.Path}}
      type: {{if .HostPath.Type}}{{.HostPath.Type}}{{else}}Directory{{end}}{{end}}{{end}}{{end}}